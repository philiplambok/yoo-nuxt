#!/bin/bash
# Start Nuxt development server

# Parse arguments
for arg in "$@"; do
    case $arg in
        --help|-h)
            echo "Usage: ./dx/dev"
            echo ""
            echo "Start Nuxt development server with live reload in Docker container"
            echo ""
            echo "Features:"
            echo "  â€¢ Live reload with volume mounting"
            echo "  â€¢ Hot module replacement"
            echo "  â€¢ Accessible at http://localhost:3000"
            echo "  â€¢ Press Ctrl+C to stop"
            echo ""
            echo "Options:"
            echo "  --help, -h          Show this help message"
            echo ""
            echo "Examples:"
            echo "  ./dx/dev                    # Start development server"
            echo ""
            echo "Prerequisites:"
            echo "  â€¢ Container must be running: ./dx/run"
            exit 0
            ;;
    esac
done

# Source common functions
source "$(dirname "$0")/_common"
check_docker
check_container_running

echo "ðŸš€ Starting Nuxt development server..."
echo "ðŸ“¡ Server will be accessible at http://localhost:3000"
echo "ðŸ”„ Press Ctrl+C to stop the server"
echo ""

# Start the development server
docker-compose -f docker-compose.dev.yml exec app pnpm dev --host 0.0.0.0